<style>
/* 弹窗样式调整 */
.layui-layer {
    top: 50% !important;
    transform: translateY(-50%) !important;
    margin-top: 0 !important;
}

/* 限制弹窗最大高度 */
.layui-layer-content {
    max-height: 85vh;
    overflow-y: auto;
}

/* 详情容器样式 */
.push-detail-container {
    max-height: 80vh;
    overflow-y: auto;
    padding: 20px;
}
</style>

<!-- 推送详情弹窗内容 -->
<div class="push-detail-container">
    <!-- 推送基本信息 -->
    <div class="layui-card">
        <div class="layui-card-header">
            <h3>推送基本信息</h3>
        </div>
        <div class="layui-card-body">
            <table class="layui-table" lay-skin="line">
                <tbody>
                    <tr>
                        <td width="120">推送标题</td>
                        <td>{$push.push_title}</td>
                    </tr>
                    <tr>
                        <td>推送内容</td>
                        <td>
                            <div style="max-width: 500px; max-height: 200px; overflow-y: auto; border: 1px solid #e6e6e6; padding: 10px; background: #f9f9f9; border-radius: 4px;">
                                {$push.push_content|raw}
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>推送类型</td>
                        <td>
                            {if $push.push_type eq 1}
                                <span class="layui-badge layui-bg-blue">推送设备</span>
                            {elseif $push.push_type eq 2}
                                <span class="layui-badge layui-bg-green">推送分组</span>
                            {else}
                                <span class="layui-badge layui-bg-gray">未知</span>
                            {/if}
                        </td>
                    </tr>
                    <tr>
                        <td>所属应用</td>
                        <td>
                            {if $push.app}
                                <span class="layui-badge layui-bg-blue">{$push.app.app_name}</span>
                            {else}
                                <span class="layui-badge layui-bg-gray">未设置</span>
                            {/if}
                        </td>
                    </tr>
                    <tr>
                        <td>所属供应商</td>
                        <td>
                            {if $push.supplier}
                                <span class="layui-badge layui-bg-orange">{$push.supplier.name}</span>
                            {else}
                                <span class="layui-badge layui-bg-gray">未设置</span>
                            {/if}
                        </td>
                    </tr>
                    <tr>
                        <td>推送开始时间</td>
                        <td>{$push.push_start_time|date='Y-m-d H:i:s'}</td>
                    </tr>
                    <tr>
                        <td>推送结束时间</td>
                        <td>{$push.push_end_time|date='Y-m-d H:i:s'}</td>
                    </tr>
                    <tr>
                        <td>推送状态</td>
                        <td>
                            {if $push.push_status eq 1}
                                <span class="layui-badge layui-bg-green">启用</span>
                            {else}
                                <span class="layui-badge layui-bg-gray">禁用</span>
                            {/if}
                        </td>
                    </tr>
                    <tr>
                        <td>创建时间</td>
                        <td>{$push.create_time|date='Y-m-d H:i:s'}</td>
                    </tr>
                    <tr>
                        <td>更新时间</td>
                        <td>{$push.update_time|date='Y-m-d H:i:s'}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- 推送设备列表 -->
    <div class="layui-card" style="margin-top: 15px;">
        <div class="layui-card-header">
            <h3>推送设备列表 <span class="layui-badge layui-bg-cyan">{$pushDevices|count} 台</span></h3>
        </div>
        <div class="layui-card-body">
            {if $pushDevices}
            <table class="layui-table" lay-skin="line">
                <thead>
                    <tr>
                        <th>设备名称</th>
                        <th>设备编号</th>
                        <th>所属应用</th>
                        <th>所属供应商</th>
                        <th>设备状态</th>
                    </tr>
                </thead>
                <tbody>
                    {foreach $pushDevices as $device}
                    <tr>
                        <td>{$device.device_name}</td>
                        <td>{$device.device_number}</td>
                        <td>
                            {if $device.app}
                                <span class="layui-badge layui-bg-blue">{$device.app.app_name}</span>
                            {else}
                                <span class="layui-badge layui-bg-gray">未设置</span>
                            {/if}
                        </td>
                        <td>
                            {if $device.supplier}
                                <span class="layui-badge layui-bg-orange">{$device.supplier.name}</span>
                            {else}
                                <span class="layui-badge layui-bg-gray">未设置</span>
                            {/if}
                        </td>
                        <td>
                            {if $device.status eq 1}
                                <span class="layui-badge layui-bg-green">启用</span>
                            {else}
                                <span class="layui-badge layui-bg-gray">禁用</span>
                            {/if}
                        </td>
                    </tr>
                    {/foreach}
                </tbody>
            </table>
            {else}
            <div class="layui-empty">
                <div class="layui-empty-text">该推送暂无关联设备</div>
            </div>
            {/if}
        </div>
    </div>
</div>
